spec:
  name: test-mr-do-starter-kit
  region: nyc
  ingress:
    rules:
    - component:
        name: web-service
      match:
        path:
          prefix: /api
    - component:
        name: static-site
      match:
        path:
          prefix: /
  services:
    - name: web-service
      environment_slug: node-js
      git:
        branch: main
        repo_clone_url: https://github.com/MauriRojas/test-do-deployment
      build_command: "npm install && npm run build"
      run_command: "npm run start:prod"
      http_port: 3000
      instance_count: 1
      instance_size_slug: apps-s-1vcpu-0.5gb
      source_dir: ./backend
  static_sites:
    - name: static-site
      environment_slug: node-js
      git:
        branch: main
        repo_clone_url: https://github.com/MauriRojas/test-do-deployment
      build_command: "npm install && npm run build"
      source_dir: ./frontend
  databases:
    - name: postgres-db
      engine: PG
      version: "15"
      production: false
      cluster_name: test-do-starter-kit-db-cluster
      db_user: saas_kit_user
      db_name: saas_kit_db